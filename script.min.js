(function(){"use strict";const $=(e)=>document.querySelector(e),$$=(e)=>Array.from(document.querySelectorAll(e));function safeRegisterGSAP(){if("undefined"!=typeof gsap&&"undefined"!=typeof ScrollTrigger){try{return gsap.registerPlugin(ScrollTrigger),!0}catch(e){return console.warn("GSAP available but register failed",e),!1}}return!1}function initNavbar(){const e=$(".navbar");if(!e)return;const t=()=>{window.scrollY>30?e.classList.add("scrolled"):e.classList.remove("scrolled")};window.addEventListener("scroll",t,{passive:!0}),t()}function initSmoothLinks(){const e=$$('a[href^="#"]'),t=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--navbar-height"))||72;e.forEach((e)=>{e.addEventListener("click",(s)=>{const r=e.getAttribute("href");if(!r||"#"===r)return;const c=document.querySelector(r);if(c){s.preventDefault();const i=c.getBoundingClientRect(),o=window.pageYOffset+i.top-(t+12);window.scrollTo({top:o,behavior:"smooth"})}})});}function initMenuMobile(){const e=document.getElementById("hamburger"),t=document.getElementById("nav-links");e&&t&&(e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("open")}),document.querySelectorAll(".nav-links a").forEach((s)=>{s.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("open")})}))}function initFAB(){const e=$("#fab"),t=$("#fabMain"),s=document.getElementById("fabOptions");e&&t&&s&&(t.addEventListener("click",(t)=>{t.stopPropagation(),e.classList.toggle("open"),s.classList.toggle("open")}),document.addEventListener("click",(t)=>{e.contains(t.target)||!e.classList.contains("open")||(e.classList.remove("open"),s.classList.remove("open"))}))}function initGallery(){const e={suite_casal:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c","https://images.unsplash.com/photo-1600210492493-0946911123ea"],suite_infantil:["https://images.unsplash.com/photo-1600566753190-58a0b1d2117f"],sala:["https://images.unsplash.com/photo-1505693416388-ac5ce068fe85"],cozinha:["https://images.unsplash.com/photo-1556909114-87a56c87c3e1"],banheiro:["https://images.unsplash.com/photo-1589176531086-df6f1cbd7470"],escritorio:["https://images.unsplash.com/photo-1587620962725-abab7fe55159"],variados:["https://images.unsplash.com/photo-1615874959474-d609969a20ed"]},t=$("#galleryModal"),s=$("#galleryImages");t&&s&&($$(".portfolio-card").forEach((s)=>{s.addEventListener("click",()=>{const r=s.dataset.gallery,c=e[r]||[];s.innerHTML=c.map((e)=>`<img src="${e}" loading="lazy" alt="Projeto">`).join(""),t.classList.add("open"),document.body.style.overflow="hidden","function"==typeof gtag&&gtag("event","open_gallery",{event_category:"engagement",event_label:r})})}),t.addEventListener("click",(e)=>{e.target===t&&closeGallery()}),window.closeGallery=function(){t.classList.remove("open"),s.innerHTML="",document.body.style.overflow=""})}function initForm(){window.sendQuote=function(e=!0){const t=encodeURIComponent((document.getElementById("clientName")||{}).value||""),s=encodeURIComponent((document.getElementById("clientPhone")||{}).value||""),r=encodeURIComponent((document.getElementById("hasProject")||{}).value||""),c=encodeURIComponent((document.getElementById("clientMessage")||{}).value||""),i=document.querySelectorAll('input[name="ambientes"]:checked'),o=Array.from(i).map((e)=>e.value).join(", ");if(!t||!s)return void alert("Por favor preencha nome e telefone.");const n=`Olá, sou ${decodeURIComponent(t)}%0aTelefone: ${decodeURIComponent(s)}%0aJá tem projeto: ${decodeURIComponent(r)}%0aAmbientes: ${o}%0aMensagem: ${decodeURIComponent(c)}%0aRegião: Fortaleza / RMF`,a=`https://wa.me/5585988355164?text=${encodeURIComponent(n)}`;("function"==typeof gtag)&&gtag("event","submit_orcamento",{event_category:"conversion",event_label:"form_to_whatsapp"}),window.open(a,"_blank")}}function initFadeObserver(){const e=new IntersectionObserver((e,t)=>{e.forEach((e)=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},{threshold:.16});$$(".fade-up").forEach((t)=>e.observe(t))}function initLazyBackgrounds(){const e=document.querySelectorAll('[data-bg-image]');if(0===e.length)return;const t={root:null,rootMargin:"0px 0px 200px 0px",threshold:.01},s=new IntersectionObserver((e,t)=>{e.forEach((e)=>{if(e.isIntersecting){const s=e.target,r=s.getAttribute("data-bg-image");s.style.backgroundImage=`url('${r}')`,s.removeAttribute("data-bg-image"),t.unobserve(s)}})},t);e.forEach((e)=>{s.observe(e)})}function initGSAP(){if(!safeRegisterGSAP())return!1;try{return gsap.to(".hero-inner",{y:-30,ease:"none",scrollTrigger:{trigger:".hero",start:"top top",scrub:!0}}),gsap.utils.toArray(".fade-up").forEach((e,t)=>{gsap.fromTo(e,{y:20,opacity:0},{y:0,opacity:1,duration:.2,delay:.02*t,scrollTrigger:{trigger:e,start:"-20% 95%"}})}),$$(".portfolio-card").forEach((e)=>{e.addEventListener("mouseenter",()=>gsap.to(e,{scale:1.03,duration:.1})),e.addEventListener("mouseleave",()=>gsap.to(e,{scale:1,duration:.1}))}),!0}catch(e){return console.warn("GSAP animations failed",e),!1}}document.addEventListener("DOMContentLoaded",()=>{initMenuMobile(),initNavbar(),initSmoothLinks(),initFAB(),initGallery(),initForm(),initFadeObserver(),initLazyBackgrounds(),initGSAP()})})();