(function(){"use strict";const $=(s)=>document.querySelector(s),$$=(s)=>Array.from(document.querySelectorAll(s));function safeRegisterGSAP(){if(typeof gsap!="undefined"&&typeof ScrollTrigger!="undefined"){try{gsap.registerPlugin(ScrollTrigger);return!0}catch(e){return console.warn("GSAP available but register failed",e),!1}}return!1}function initNavbar(){const n=$(".navbar");if(!n)return;const o=()=>{if(window.scrollY>30)n.classList.add("scrolled");else n.classList.remove("scrolled")};window.addEventListener("scroll",o,{passive:!0}),o()}function initSmoothLinks(){const l=$$('a[href^="#"]'),h=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--navbar-height"))||72;l.forEach(a=>{a.addEventListener("click",e=>{const r=a.getAttribute("href");if(!r||r==="#")return;const t=document.querySelector(r);if(t){e.preventDefault();const c=t.getBoundingClientRect(),o=window.pageYOffset+c.top-(h+12);window.scrollTo({top:o,behavior:"smooth"})}})})}function initMenuMobile(){const h=document.getElementById("hamburger"),l=document.getElementById("nav-links");if(!h||!l)return;h.addEventListener("click",()=>{h.classList.toggle("active"),l.classList.toggle("open")}),document.querySelectorAll(".nav-links a").forEach(a=>{a.addEventListener("click",()=>{h.classList.remove("active"),l.classList.remove("open")})})}function initFAB(){const f=$("#fab"),m=$("#fabMain"),o=document.getElementById("fabOptions");if(!f||!m||!o)return;m.addEventListener("click",e=>{e.stopPropagation(),f.classList.toggle("open"),o.classList.toggle("open")}),document.addEventListener("click",e=>{if(!f.contains(e.target)&&f.classList.contains("open")){f.classList.remove("open"),o.classList.remove("open")}})}function initLazyBackgrounds(){const i=window.matchMedia("(max-width: 767px)").matches,a=i?"data-bg-mobile":"data-bg-desktop",l=document.querySelectorAll("[data-bg-mobile],[data-bg-desktop]");if(l.length===0)return;const o={root:null,rootMargin:"0px 0px 200px 0px",threshold:.001},b=new IntersectionObserver((e,n)=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target,r=t.getAttribute(a);r&&(t.style.backgroundImage=`url('${r}')`),t.removeAttribute("data-bg-mobile"),t.removeAttribute("data-bg-desktop"),n.unobserve(t)}})},o);l.forEach(e=>b.observe(e))}function initGallery(){const g={suite_casal:["https://images.unsplash.com/photo-1600607687939-ce8a6c25118c","https://images.unsplash.com/photo-1600210492493-0946911123ea"],suite_infantil:["https://images.unsplash.com/photo-1600566753190-58a0b1d2117f"],sala:["https://images.unsplash.com/photo-1505693416388-ac5ce068fe85"],cozinha:["https://images.unsplash.com/photo-1556909114-87a56c87c3e1"],banheiro:["https://images.unsplash.com/photo-1589176531086-df6f1cbd7470"],escritorio:["https://images.unsplash.com/photo-1587620962725-abab7fe55159"],variados:["https://images.unsplash.com/photo-1615874959474-d609969a20ed"]},m=$("#galleryModal"),i=$("#galleryImages");if(!m||!i)return;$$(".portfolio-card").forEach(c=>{c.addEventListener("click",()=>{const e=c.dataset.gallery,l=g[e]||[];i.innerHTML=l.map(l=>`<img src="${l}" loading="lazy" alt="Projeto">`).join(""),m.classList.add("open"),document.body.style.overflow="hidden",window.gtag&&gtag("event","open_gallery",{event_category:"engagement",event_label:e})})}),m.addEventListener("click",e=>{e.target===m&&closeGallery()}),window.closeGallery=function(){m.classList.remove("open"),i.innerHTML="",document.body.style.overflow=""}}function initForm(){window.sendQuote=function(o=!0){const e=encodeURIComponent((document.getElementById("clientName")||{}).value||""),t=encodeURIComponent((document.getElementById("clientPhone")||{}).value||""),r=encodeURIComponent((document.getElementById("hasProject")||{}).value||""),c=encodeURIComponent((document.getElementById("clientMessage")||{}).value||""),l=document.querySelectorAll('input[name="ambientes"]:checked'),a=Array.from(l).map(e=>e.value).join(", ");if(!e||!t)return alert("Por favor preencha nome e telefone.");const n=`Olá, sou ${decodeURIComponent(e)}%0aTelefone: ${decodeURIComponent(t)}%0aJá tem projeto: ${decodeURIComponent(r)}%0aAmbientes: ${a}%0aMensagem: ${decodeURIComponent(c)}%0aRegião: Fortaleza / RMF`,s="5585988355164",u=`https://wa.me/${s}?text=${encodeURIComponent(n)}`;window.gtag&&gtag("event","submit_orcamento",{event_category:"conversion",event_label:"form_to_whatsapp"}),window.open(u,"_blank")}}function initFadeObserver(){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},{threshold:.16});$$(".fade-up").forEach(t=>e.observe(t))}function initGSAP(){const e=safeRegisterGSAP();if(!e)return!1;try{gsap.to(".hero-inner",{y:-30,ease:"none",scrollTrigger:{trigger:".hero",start:"top top",scrub:!0}}),gsap.utils.toArray(".fade-up").forEach((e,t)=>{gsap.fromTo(e,{y:20,opacity:0},{y:0,opacity:1,duration:.2,delay:.02*t,scrollTrigger:{trigger:e,start:"-20% 95%"}})}),$$(".portfolio-card").forEach(e=>{e.addEventListener("mouseenter",()=>gsap.to(e,{scale:1.03,duration:.1})),e.addEventListener("mouseleave",()=>gsap.to(e,{scale:1,duration:.1}))});return!0}catch(e){return console.warn("GSAP animations failed",e),!1}}document.addEventListener("DOMContentLoaded",()=>{initMenuMobile(),initNavbar(),initSmoothLinks(),initFAB(),initLazyBackgrounds(),initGallery(),initForm(),initFadeObserver(),initGSAP()})})();